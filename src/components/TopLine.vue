<template>
  <div class="topline-wrapper">
    <div class="query-topline" :class="{ nav_active: nav_show }">
      <div class="container">
        <svg
          class="full_logo"
          width="253"
          height="51"
          viewBox="0 0 253 51"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <rect x="175" width="78" height="49" rx="9" fill="#2B2D42" />
          <path
            d="M54.876 43.3136L54.8967 43.3359L54.9193 43.3564C55.3954 43.7871 55.9693 44.011 56.6104 44.011C57.2687 44.011 57.8591 43.7941 58.3236 43.3355L58.3345 43.3248L58.3448 43.3136C58.7818 42.843 59.0117 42.2722 59.0117 41.6316V13.4368H68.694C69.3157 13.4368 69.8797 13.239 70.32 12.8044L69.9272 12.4064L70.32 12.8044C70.7518 12.3781 70.9645 11.8363 70.9645 11.2297C70.9645 10.6085 70.7611 10.0473 70.32 9.61187L69.8282 10.11L70.32 9.61187C69.8797 9.17723 69.3157 8.97942 68.694 8.97942H44.5704C43.9487 8.97942 43.3848 9.17723 42.9445 9.61187C42.5034 10.0473 42.3 10.6085 42.3 11.2297C42.3 11.8363 42.5126 12.3781 42.9445 12.8044C43.3848 13.239 43.9487 13.4368 44.5704 13.4368H54.2091V41.6316C54.2091 42.2722 54.439 42.843 54.876 43.3136ZM81.4831 43.1205L81.4866 43.1223C83.6604 44.1801 86.1235 44.7 88.8599 44.7C91.5673 44.7 93.9892 44.18 96.1077 43.1196C98.247 42.0633 99.9314 40.5891 101.139 38.6953C102.381 36.7932 102.996 34.6208 102.996 32.2009V11.3588C102.996 10.7068 102.777 10.124 102.319 9.66651C101.869 9.18481 101.262 8.97942 100.595 8.97942C99.9362 8.97942 99.3459 9.19632 98.8813 9.65493C98.416 10.1142 98.1932 10.7013 98.1932 11.3588V32.2009C98.1932 33.7677 97.7919 35.1215 97.0044 36.2876L97.0043 36.2876L96.9984 36.2967C96.2306 37.4727 95.1543 38.4107 93.746 39.1068C92.3428 39.7717 90.7193 40.1134 88.8599 40.1134C86.97 40.1134 85.3156 39.7711 83.8818 39.1045C82.4445 38.4076 81.3396 37.4685 80.5439 36.2922C79.784 35.1262 79.3957 33.7706 79.3957 32.2009V11.3588C79.3957 10.7013 79.1728 10.1142 78.7076 9.65493L78.2158 10.1531L78.7076 9.65493C78.243 9.19632 77.6527 8.97942 76.9944 8.97942C76.3361 8.97942 75.7458 9.19632 75.2812 9.65493C74.8159 10.1142 74.5931 10.7013 74.5931 11.3588V32.2009C74.5931 34.6186 75.1919 36.7898 76.404 38.6919L76.404 38.692L76.4084 38.6987C77.6449 40.5906 79.343 42.0642 81.4831 43.1205ZM133.338 39.1154L133.343 39.1107C134.923 37.5213 136.137 35.662 136.986 33.5392C137.866 31.3806 138.302 29.0226 138.302 26.4737C138.302 23.9254 137.866 21.5808 136.985 19.4492C136.137 17.3271 134.922 15.4818 133.341 13.9204C131.758 12.3281 129.872 11.114 127.694 10.2768C125.538 9.40832 123.166 8.97942 120.589 8.97942H112.736C112.078 8.97942 111.488 9.19632 111.023 9.65493C110.558 10.1142 110.335 10.7013 110.335 11.3588V41.6316C110.335 42.2891 110.558 42.8762 111.023 43.3355C111.488 43.7941 112.078 44.011 112.736 44.011H120.589C123.165 44.011 125.536 43.5967 127.691 42.7576L127.696 42.7557C129.872 41.8907 131.755 40.678 133.338 39.1154ZM131.886 19.7081L131.888 19.7117C132.985 21.6613 133.543 23.9087 133.543 26.4737C133.543 29.0377 132.985 31.3006 131.887 33.2805C130.785 35.2368 129.261 36.7824 127.304 37.9256C125.389 39.0326 123.158 39.5966 120.589 39.5966H115.138V13.3938H120.589C123.158 13.3938 125.39 13.958 127.305 15.0653L127.309 15.0675C129.261 16.1804 130.784 17.7235 131.886 19.7081ZM152.335 41.6342L152.355 41.6565L152.378 41.6769C152.854 42.1077 153.428 42.3316 154.069 42.3316C154.711 42.3316 155.283 42.1061 155.739 41.6561C156.211 41.1899 156.47 40.6123 156.47 39.9521V29.3919L168.269 11.0048L168.272 10.9987C168.762 10.2183 168.849 9.37344 168.441 8.55777C168.267 8.18152 168.017 7.85774 167.672 7.63057C167.321 7.3998 166.92 7.3 166.502 7.3C165.574 7.3 164.834 7.74109 164.338 8.5324L154.113 24.7719L143.843 8.44546L143.835 8.43225L143.826 8.41942C143.338 7.71612 142.657 7.3 141.811 7.3C140.926 7.3 140.215 7.70124 139.768 8.46405C139.285 9.28748 139.4 10.173 139.906 10.9942L139.906 10.9942L139.912 11.0038L151.668 29.3912V39.9521C151.668 40.5927 151.898 41.1636 152.335 41.6342Z"
            stroke="#2B2D42"
            stroke-width="1.4"
          />
          <path
            d="M185.503 40.1061C185.066 40.1061 184.707 39.9647 184.424 39.682C184.141 39.3993 184 39.0396 184 38.6027V11.5034C184 11.0665 184.141 10.7067 184.424 10.424C184.707 10.1413 185.066 10 185.503 10C185.94 10 186.3 10.1413 186.583 10.424C186.865 10.7067 187.007 11.0665 187.007 11.5034V38.6027C187.007 39.0396 186.865 39.3993 186.583 39.682C186.3 39.9647 185.94 40.1061 185.503 40.1061Z"
            fill="white"
            fill-opacity="0.99"
          />
          <path
            d="M195.847 40.1061C195.384 40.1061 195.011 39.9776 194.729 39.7206C194.472 39.4379 194.343 39.0781 194.343 38.6412V20.5236C194.343 20.061 194.472 19.7013 194.729 19.4443C195.011 19.1616 195.384 19.0203 195.847 19.0203C196.283 19.0203 196.63 19.1616 196.887 19.4443C197.17 19.7013 197.311 20.061 197.311 20.5236V21.8343C198.134 20.8834 199.149 20.1381 200.357 19.5985C201.59 19.0588 202.914 18.789 204.327 18.789C206.152 18.789 207.784 19.1744 209.223 19.9454C210.662 20.6907 211.793 21.7957 212.615 23.2605C213.463 24.7254 213.887 26.5114 213.887 28.6187V38.6412C213.887 39.0524 213.746 39.3993 213.463 39.682C213.18 39.9647 212.833 40.1061 212.422 40.1061C211.985 40.1061 211.626 39.9647 211.343 39.682C211.06 39.3993 210.919 39.0524 210.919 38.6412V28.6187C210.919 26.2287 210.251 24.4684 208.914 23.3376C207.604 22.1812 205.972 21.603 204.019 21.603C202.76 21.603 201.616 21.8471 200.588 22.3354C199.586 22.8237 198.789 23.4918 198.198 24.3399C197.607 25.1879 197.311 26.1516 197.311 27.231V38.6412C197.311 39.0781 197.17 39.4379 196.887 39.7206C196.63 39.9776 196.283 40.1061 195.847 40.1061Z"
            fill="white"
            fill-opacity="0.99"
          />
          <path
            d="M229.837 40.2988C227.806 40.2988 225.995 39.8362 224.401 38.9111C222.834 37.9602 221.587 36.6753 220.662 35.0563C219.763 33.4372 219.313 31.6126 219.313 29.5824C219.313 27.5265 219.75 25.6891 220.624 24.0701C221.497 22.451 222.692 21.1789 224.209 20.2538C225.725 19.3029 227.472 18.8275 229.451 18.8275C232.664 18.8275 235.272 20.061 237.276 22.5281C237.559 22.8365 237.662 23.1706 237.585 23.5304C237.508 23.8645 237.289 24.16 236.93 24.417C236.647 24.6226 236.326 24.6997 235.966 24.6483C235.632 24.5712 235.336 24.3784 235.079 24.0701C233.589 22.3739 231.713 21.5259 229.451 21.5259C228.012 21.5259 226.74 21.8728 225.635 22.5667C224.556 23.2605 223.708 24.2114 223.091 25.4192C222.5 26.6271 222.204 28.0148 222.204 29.5824C222.204 31.1243 222.525 32.4992 223.168 33.7071C223.81 34.9149 224.71 35.8658 225.866 36.5596C227.023 37.2535 228.346 37.6004 229.837 37.6004C231.893 37.6004 233.55 37.0479 234.809 35.9429C235.118 35.6859 235.439 35.5445 235.773 35.5188C236.107 35.4931 236.416 35.5959 236.698 35.8272C237.007 36.1099 237.174 36.4311 237.199 36.7909C237.251 37.1507 237.135 37.4591 236.852 37.7161C234.976 39.4379 232.638 40.2988 229.837 40.2988Z"
            fill="white"
            fill-opacity="0.99"
          />
          <circle cx="243.5" cy="38.5" r="1.5" fill="#FDFDFD" />
          <path
            d="M7.16047 20H34C34 20 32.136 19.4375 32.136 17H20.5803H5.33337C5.33337 18.3235 7.16047 20 7.16047 20Z"
            fill="black"
            fill-opacity="0.1"
          />
          <path
            d="M7.16047 13.6667H34C34 13.6667 32.136 14.2917 32.136 17.0001H20.5803H5.33337C5.33337 15.5295 7.16047 13.6667 7.16047 13.6667Z"
            fill="black"
            fill-opacity="0.25"
          />
          <path
            d="M36.0657 30H4.33337C4.33337 30 5.54717 30.6 6.06737 31.8C6.58757 33 6.58067 33.9877 6.58067 33.9877L38.6667 34L37.973 31.6L36.0657 30Z"
            fill="black"
            fill-opacity="0.25"
          />
          <path
            d="M6.06737 36.2001C5.54717 37.4001 4.33337 38.0001 4.33337 38.0001H25.5V34.0051H6.58597C6.58597 34.0051 6.58757 35.0001 6.06737 36.2001Z"
            fill="black"
            fill-opacity="0.1"
          />
          <path
            d="M36.7273 37.4566L34.8297 37.9999H33C33 37.9999 33 37.3209 33 36.2249C33 35.1286 33 34.3333 33 34.3333H38.3333V35.0123L38.1873 35.8269L37.6033 36.6419L36.7273 37.4566Z"
            fill="#2F0C2B"
            fill-opacity="0.1"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M8.55707 9.33333C4.56753 9.33333 1.33333 12.9009 1.33333 16.8904C1.33333 21.001 4.66567 24.3333 8.77627 24.3333H10.5914C10.9596 24.3333 11.2581 24.6318 11.2581 25C11.2581 25.3682 10.9596 25.6667 10.5914 25.6667H8.77627C3.92927 25.6667 0 21.7374 0 16.8904C0 12.1645 3.83113 8 8.55707 8H33.289C34.7863 8 36 9.21373 36 10.711C36 12.2083 34.7863 13.7553 33.289 13.7553H9.0966C7.38493 13.7553 5.99737 15.1429 5.99737 16.8545C5.99737 18.5662 7.38497 19.9538 9.0966 19.9538H33.1437C34.7213 19.9538 36 21.2326 36 22.8102C36 24.3878 34.7213 25.6667 33.1437 25.6667H31.8387C31.4703 25.6667 31.172 25.3682 31.172 25C31.172 24.6318 31.4703 24.3333 31.8387 24.3333H33.1437C33.9847 24.3333 34.6667 23.6514 34.6667 22.8102C34.6667 21.969 33.9847 21.2871 33.1437 21.2871H9.0966C6.64857 21.2871 4.66403 19.3026 4.66403 16.8545C4.66403 14.4065 6.6486 12.422 9.0966 12.422H33.289C34.0497 12.422 34.6667 11.4719 34.6667 10.711C34.6667 9.95017 34.0497 9.33333 33.289 9.33333H8.55707Z"
            fill="#2B2D42"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M5.34251 25.6666C4.41701 25.6666 3.66671 26.4169 3.66671 27.3424C3.66671 28.2679 4.41701 29.0182 5.34251 29.0182H34.4574C37.2087 29.0182 39.439 31.2486 39.439 33.9999C39.439 36.7513 37.2087 38.9816 34.4574 38.9816H33.581C33.2127 38.9816 32.9144 38.6833 32.9144 38.3149C32.9144 37.9469 33.2127 37.6483 33.581 37.6483H34.4574C36.472 37.6483 38.1057 36.0149 38.1057 33.9999C38.1057 31.9849 36.472 30.3516 34.4574 30.3516H5.34251C3.68061 30.3516 2.33337 29.0043 2.33337 27.3424C2.33337 25.6805 3.68061 24.3333 5.34251 24.3333H11.3784C11.7466 24.3333 12.0451 24.6317 12.0451 24.9999C12.0451 25.3681 11.7466 25.6666 11.3784 25.6666H5.34251ZM23.9775 24.9999C23.9775 24.6317 24.276 24.3333 24.6442 24.3333H35.2924C40.6537 24.3333 45 28.6796 45 34.0409C45 39.5413 40.5414 43.9999 35.041 43.9999H33.581C33.2127 43.9999 32.9144 43.7016 32.9144 43.3333C32.9144 42.9649 33.2127 42.6666 33.581 42.6666H35.041C39.8047 42.6666 43.6667 38.8049 43.6667 34.0409C43.6667 29.4159 39.917 25.6666 35.2924 25.6666H24.6442C24.276 25.6666 23.9775 25.3681 23.9775 24.9999ZM2.33337 40.8243C2.33337 39.0703 3.75521 37.6483 5.50917 37.6483H25.32C25.6884 37.6483 25.9867 37.9469 25.9867 38.3149C25.9867 38.6833 25.6884 38.9816 25.32 38.9816H5.50917C4.49161 38.9816 3.66671 39.8066 3.66671 40.8243C3.66671 41.8416 4.49161 42.6666 5.50917 42.6666H25.32C25.6884 42.6666 25.9867 42.9649 25.9867 43.3333C25.9867 43.7016 25.6884 43.9999 25.32 43.9999H5.50917C3.75521 43.9999 2.33337 42.5783 2.33337 40.8243Z"
            fill="#2B2D42"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M26.3333 34.6666V48.6026L28.4257 46.2903C28.8223 45.8523 29.511 45.8523 29.9077 46.2903L29.9083 46.2906L32 48.6026V34.6666H26.3333ZM25 34.3333C25 33.7809 25.4477 33.3333 26 33.3333H32.3333C32.8857 33.3333 33.3333 33.7809 33.3333 34.3333V49.4679C33.3333 50.3823 32.2063 50.8183 31.5917 50.1386L29.1667 47.4583L26.7417 50.1386C26.127 50.8183 25 50.3823 25 49.4679V34.3333Z"
            fill="#2B2D42"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M24.1666 43.9999C24.1666 43.3559 24.6888 42.8333 25.3333 42.8333H26.0066V44.4999H25.8333V49.2133L26.573 50.0109L26.127 50.4246C26.1266 50.4249 26.1266 50.4249 26.1266 50.4249C25.3796 51.1179 24.1666 50.5876 24.1666 49.5696V43.9999ZM28.2756 47.5709L29.2563 46.2553L33.1666 48.2193V49.8259C33.1666 50.8826 31.8746 51.3946 31.1506 50.6259L28.2756 47.5709Z"
            fill="black"
            fill-opacity="0.25"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M26.3333 34.6666V48.6026L26.9223 47.9516L28.4257 46.2903C28.8223 45.8523 29.511 45.8523 29.9077 46.2903L29.9083 46.2906L32 48.6026V34.6666H26.3333ZM25.7527 49.2446C25.7527 49.2446 25.7527 49.2443 25.7527 49.2446V49.2446ZM25 34.3333C25 33.7809 25.4477 33.3333 26 33.3333H32.3333C32.8857 33.3333 33.3333 33.7809 33.3333 34.3333V49.4679C33.3333 50.3823 32.2063 50.8183 31.5917 50.1386L29.1667 47.4583L27.911 48.8463L26.7417 50.1386C26.7417 50.1389 26.7417 50.1386 26.7417 50.1386C26.127 50.8183 25 50.3823 25 49.4679V34.3333Z"
            fill="#2B2D42"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M21.3334 33.9999C21.3334 33.6316 21.6318 33.3333 22 33.3333H38C38.3684 33.3333 38.6667 33.6316 38.6667 33.9999C38.6667 34.3683 38.3684 34.6666 38 34.6666H22C21.6318 34.6666 21.3334 34.3683 21.3334 33.9999Z"
            fill="#2B2D42"
          />
        </svg>

        <div id="nav_trigger" @click="nav_show = !nav_show">
          <!--  -->
          <span class="menu-line line-left"></span>
          <span class="menu-line line"></span>
          <span class="menu-line line-right"></span>
        </div>
      </div>
    </div>

    <div class="menu-items">
      <div
        class="item"
        @click="navChecker"
        data-custom="admission"
        data-offset="30"
      >
        Admission
      </div>
      <div class="item" @click="navChecker" data-link="countries">Studying</div>
      <div class="item" @click="navChecker" data-custom="info" data-offset="50">
        ISA
      </div>
      <div
        class="item"
        @click="navChecker"
        data-custom="about-study"
        data-offset="-150"
      >
        About Us
      </div>
      <div class="item">Contacts</div>
    </div>
  </div>
</template>

<script>
import gsap from "gsap";

export default {
  name: "TopLine",
  data() {
    return {
      nav_show: false,
    };
  },
  props: {
    isMobile: Boolean,
  },
  watch: {
    nav_show(val) {
      const body = document.querySelector("body");
      const scrollbarwidth = this.getScrollbarWidth();
      if (val) {
        body.style.cssText = `overflow: hidden; margin-right: ${scrollbarwidth}px; background: #fafafa`;
      } else {
        body.style.removeProperty("overflow");
        body.style.removeProperty("margin-right");
        body.style.removeProperty("background");
      }
    },
  },
  methods: {
    getScrollbarWidth() {
      // Creating invisible container
      const outer = document.createElement("div");
      outer.style.visibility = "hidden";
      outer.style.overflow = "scroll"; // forcing scrollbar to appear
      outer.style.msOverflowStyle = "scrollbar"; // needed for WinJS apps
      document.body.appendChild(outer);

      // Creating inner element and placing it in the container
      const inner = document.createElement("div");
      outer.appendChild(inner);

      // Calculating difference between container's full width and the child width
      const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;

      // Removing temporary elements from the DOM
      outer.parentNode.removeChild(outer);

      return scrollbarWidth;
    },
    navChecker(e) {
      this.nav_show = !this.nav_show;
      const element = e.target.hasAttribute("data-custom")
        ? document.querySelector(`#${e.target.dataset.custom}`)
        : document.querySelector(`#${e.target.dataset.link}`);
      const offset = element.offsetTop;
      if (e.target.hasAttribute("data-custom")) {
        setTimeout(function() {
          gsap.to(window, {
            duration: offset * 0.0008,
            scrollTo: offset - e.target.dataset.offset,
            ease: "power1",
          });
        }, 500);
      } else {
        setTimeout(function() {
          gsap.to(window, {
            duration:
              document.querySelector(`#${e.target.dataset.link}`).offsetTop *
              0.0006,
            scrollTo: `#${e.target.dataset.link}`,
            ease: "power1",
          });
        }, 500);
      }
    },
  },
};
</script>

<style lang="scss" scoped>
.topline-wrapper {
  font-family: "Comfortaa", sans-serif;
  color: var(--primary);
  font-weight: 600;
  font-size: calc(2vw + 10px);

  $transition--easing: cubic-bezier(0.77, 0, 0.175, 1);
  $transition--length: 0.8;
  $menu--items--count: 5;

  .menu-items {
    z-index: 101;
    position: fixed;
    width: 85vw;
    height: var(--viewHeight);
    top: 0;
    left: 15vw;
    display: flex;
    flex-direction: column;
    align-items: left;
    justify-content: center;
    row-gap: 5%;
    pointer-events: none;

    .item {
      transition: opacity 0.2s ease, transform 0.3s ease;
      opacity: 0;
      transform: translateX(-15%);
      width: fit-content;
      cursor: pointer;

      &:after {
        content: "";
        position: absolute;
        top: 105%;
        left: 0;
        height: 2px;
        width: 0;
        background: #4c5177;
        transition: width 0.2s ease-in-out;
      }

      &:hover {
        &:after {
          width: 100%;
        }
      }
    }
  }
  .query-topline {
    padding: 5px 20px;
    width: 100%;
    background: rgba(255, 255, 255, 0.692);
    box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.055);

    &:before,
    &:after {
      content: "";
      position: fixed;
      width: 100vw;
      height: 100vh;
      background: rgba(#eaeaea, 0.4);
      z-index: 100;
      top: 0;
      left: 0;
      transition: transform $transition--easing $transition--length + s;
      transform: translateX(0%) translateY(-100%);
    }

    &:after {
      background: rgba(#ffffff, 1);
      transition-delay: 0s;
    }
    &:before {
      transition-delay: 0.1s;
    }

    &.nav_active {
      + .menu-items {
        pointer-events: all;
        .item {
          pointer-events: all;
          opacity: 1;
          transform: translateX(0%);
          transition: opacity 0.3s ease, transform 0.3s ease, color 0.3s ease;
          @for $i from 0 through $menu--items--count {
            &:nth-child(#{$i}) {
              transition-delay: $transition--length * $i / 8 + 0.5 + s;
            }
          }
        }
      }

      &:before,
      &:after {
        transform: translateX(0%) translateY(0%);
      }

      &:after {
        transition-delay: 0.1s;
      }
      &:before {
        transition-delay: 0s;
      }
      .container #nav_trigger {
        .menu-line {
          background: rgb(87, 87, 87);
          &.line-left {
            transform: translateX(1px) rotate(45deg);
          }
          &.line {
            transform: rotate(-45deg);
          }
          &.line-right {
            transform: translateX(-2px) rotate(45deg);
          }
        }
      }
    }
    .container {
      width: 100%;
      display: grid;
      grid-template-columns: 30% 15%;
      column-gap: 55%;
      align-items: center;
      justify-content: center;
      align-content: center;
      .full_logo {
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: left;
      }
      #nav_trigger {
        align-self: center;
        justify-self: right;

        display: flex;
        flex-direction: column;
        row-gap: 4px;
        justify-content: center;

        cursor: pointer;
        height: 30px;
        width: 30px;
        z-index: 102;

        .menu-line {
          display: flex;
          pointer-events: none;
          height: 2px;
          // margin-bottom: 4px;
          background: var(--primary);
          transition: all 0.3s ease-in-out;

          &.line-left {
            width: calc(50% + 1px);
          }

          &.line {
            width: 100%;
          }
          &.line-right {
            width: calc(50% + 1px);
            margin-left: 50%;
          }
        }
      }
    }
  }
}
</style>
